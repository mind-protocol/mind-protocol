GUARDIAN.PY FIX - Remove Pipe Buffer Deadlock
==================================================

PROBLEM:
Lines 184-185: capture_output=True causes deadlock when launcher outputs thousands of lines during engine initialization
Lines 196-204: Premature break after first crash instead of exponential backoff retries

FIX:
Remove lines 184-185 (capture_output=True, text=True)
Remove lines 196-204 (stderr logging block with premature break)

OLD CODE (lines 180-214):
----------------------------------------
            process = subprocess.run(
                [sys.executable, str(LAUNCHER_SCRIPT)],
                check=False,  # Don't raise on non-zero exit
                env=env,
                capture_output=True,
                text=True
            )

            exit_code = process.returncode

            if exit_code == 0:
                logger.info("Launcher exited cleanly (exit code 0)")
                logger.info("Guardian stopping (clean shutdown)")
                break  # Clean exit, don't restart
            else:
                logger.error(f"Launcher crashed (exit code {exit_code})")
                 # Log crash details
                if process.stderr:
                    logger.error("="*70)
                    logger.error("LAUNCHER CRASH TRACEBACK:")
                    logger.error("="*70)
                    for line in process.stderr.strip().split('\n'):
                        logger.error(f"  {line}")
                    logger.error("="*70)
                    break
                restart_count += 1
                 # Stop after 10 crashes
                if restart_count >= 10:
                    logger.error("GIVING UP after 10 crashes - check traceback above")
                    break

                # Exponential backoff to prevent rapid restart loops
                wait_time = min(30, 2 ** min(restart_count, 5))
                logger.warning(f"Waiting {wait_time}s before restart...")
                time.sleep(wait_time)

NEW CODE (lines 180-206):
----------------------------------------
            process = subprocess.run(
                [sys.executable, str(LAUNCHER_SCRIPT)],
                check=False,  # Don't raise on non-zero exit
                env=env
            )

            exit_code = process.returncode

            if exit_code == 0:
                logger.info("Launcher exited cleanly (exit code 0)")
                logger.info("Guardian stopping (clean shutdown)")
                break  # Clean exit, don't restart
            else:
                logger.error(f"Launcher crashed (exit code {exit_code})")
                restart_count += 1

                # Stop after 10 crashes
                if restart_count >= 10:
                    logger.error("GIVING UP after 10 crashes")
                    break

                # Exponential backoff to prevent rapid restart loops
                wait_time = min(30, 2 ** min(restart_count, 5))
                logger.warning(f"Waiting {wait_time}s before restart...")
                time.sleep(wait_time)

MANUAL APPLICATION:
----------------------------------------
1. Open guardian.py
2. Go to line 180-214
3. Delete lines 184-185 (capture_output=True, text=True)
4. Delete lines 196-204 (the stderr logging block)
5. Clean up the "check traceback above" message on line 208
6. Save file
7. Kill launcher (taskkill //F //PID 73224)
8. Start guardian (python guardian.py)

VERIFICATION:
----------------------------------------
After fix, guardian should:
- Start launcher successfully
- NOT deadlock after 20 seconds
- Show launcher output in console naturally
- Restart launcher on crashes with exponential backoff
- Give up after 10 crashes (not after 1)
